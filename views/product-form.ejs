<%- include('partials/head', { pageTitle }) %>

<div class="row justify-content-center">
    <div class="col-lg-8">
        <div class="card border-0 shadow-sm">
            <div class="card-body p-4">
                <h2 class="h4 mb-4"><%= isEdit ? 'Update product' : 'Add new product' %></h2>
                <form action="<%= isEdit ? `/products/${product.id}` : '/products' %>" method="POST" enctype="multipart/form-data" class="row g-3">
                    <div class="col-md-8">
                        <label class="form-label" for="productName">Product name</label>
                        <input class="form-control" type="text" id="productName" name="productName" value="<%= product.productName || '' %>" required>
                    </div>
                    <div class="col-md-4">
                        <label class="form-label" for="category">Category</label>
                        <input class="form-control" type="text" id="category" name="category" value="<%= product.category || '' %>" placeholder="Produce, bakery">
                    </div>
                    <div class="col-md-6">
                        <label class="form-label" for="price">Price</label>
                        <input class="form-control" type="number" step="0.01" id="price" name="price" value="<%= product.price || '' %>" required>
                    </div>
                    <div class="col-md-6">
                        <label class="form-label" for="quantity">Quantity</label>
                        <input class="form-control" type="number" id="quantity" name="quantity" value="<%= product.quantity || 0 %>" min="0" required>
                    </div>
                    <div class="col-12">
                        <label class="form-label" for="image">Image</label>
                        <input class="form-control" type="file" id="image" name="image" accept="image/*" <%= isEdit ? '' : 'required' %>>
                        <% if (product.image) { %>
                            <input type="hidden" name="currentImage" value="<%= product.image %>">
                            <small class="text-muted">Current: <%= product.image %></small>
                        <% } %>
                    </div>
                    <div class="col-12 d-flex gap-2">
                        <button class="btn btn-primary" type="submit"><%= isEdit ? 'Save changes' : 'Create product' %></button>
                        <a class="btn btn-outline-secondary" href="/inventory">Cancel</a>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<%- include('partials/footer') %>

